tinymce.PluginManager.add("filemanager",function(e){function n(t){0===e.settings.external_filemanager_path.toLowerCase().indexOf(t.origin.toLowerCase())&&"responsivefilemanager"===t.data.sender&&(tinymce.activeEditor.windowManager.getParams().setUrl(t.data.url),tinymce.activeEditor.windowManager.close(),window.removeEventListener?window.removeEventListener("message",n,!1):window.detachEvent("onmessage",n))}function t(t,i,a,s){urltype=2,"image"==a&&(urltype=1),"media"==a&&(urltype=3);var r="RESPONSIVE FileManager";"undefined"!=typeof e.settings.filemanager_title&&e.settings.filemanager_title&&(r=e.settings.filemanager_title);var g="key";"undefined"!=typeof e.settings.filemanager_access_key&&e.settings.filemanager_access_key&&(g=e.settings.filemanager_access_key);var d="";"undefined"!=typeof e.settings.filemanager_sort_by&&e.settings.filemanager_sort_by&&(d="&sort_by="+e.settings.filemanager_sort_by);var l="false";"undefined"!=typeof e.settings.filemanager_descending&&e.settings.filemanager_descending&&(l=e.settings.filemanager_descending);var o="";"undefined"!=typeof e.settings.filemanager_subfolder&&e.settings.filemanager_subfolder&&(o="&fldr="+e.settings.filemanager_subfolder);var f="";"undefined"!=typeof e.settings.filemanager_crossdomain&&e.settings.filemanager_crossdomain&&(f="&crossdomain=1",window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n)),tinymce.activeEditor.windowManager.open({title:r,file:e.settings.external_filemanager_path+"dialog.php?type="+urltype+"&descending="+l+d+o+f+"&lang="+e.settings.language+"&akey="+g,width:860,height:570,resizable:!0,maximizable:!0,inline:1},{setUrl:function(n){var i=s.document.getElementById(t);if(i.value=e.convertURL(n),"fireEvent"in i)i.fireEvent("onchange");else{var a=document.createEvent("HTMLEvents");a.initEvent("change",!1,!0),i.dispatchEvent(a)}}})}return tinymce.activeEditor.settings.file_browser_callback=t,!1});